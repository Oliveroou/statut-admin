<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Statut Technicien avec Admin</title>
  <style>
    body { font-family: Arial, sans-serif; text-align: center; padding-top: 40px; }
    input, button { padding: 10px; font-size: 16px; margin: 10px; }
    #statut { margin-top: 30px; font-size: 22px; font-weight: bold; }
    .vert { color: #155724; background-color: #d4edda; padding: 10px; border-radius: 5px; }
    .jaune { color: #856404; background-color: #fff3cd; padding: 10px; border-radius: 5px; }
    .rouge { color: #721c24; background-color: #f8d7da; padding: 10px; border-radius: 5px; }
    #admin-section { 
      margin-top: 40px; 
      border-top: 2px solid #ccc; 
      padding-top: 20px; 
      display: none; 
      max-width: 400px; margin-left:auto; margin-right:auto;
      text-align: left;
    }
    label { display: block; margin-top: 10px; }
    #admin-login { margin-bottom: 20px; }
  </style>
</head>
<body>

  <h2>Consulter le statut du technicien</h2>

  <input type="text" id="input-tech" placeholder="Entrez Tech N3 ou Tech N4" />
  <button onclick="afficherStatut()">Afficher Statut</button>

  <div id="statut"></div>

  <button id="admin-toggle-btn" style="margin-top:40px;">üîê Admin (cliquez ici)</button>

  <div id="admin-section">
    <div id="admin-login">
      <label for="admin-password">Mot de passe Admin :</label>
      <input type="password" id="admin-password" />
      <button onclick="verifierMotDePasse()">Valider</button>
      <div id="admin-msg" style="color:red; margin-top: 10px;"></div>
    </div>

    <div id="admin-form" style="display:none;">
      <label for="clients-n3">Clients Tech N3 :</label>
      <input type="number" id="clients-n3" min="0" />

      <label for="clients-n4">Clients Tech N4 :</label>
      <input type="number" id="clients-n4" min="0" />

      <button onclick="mettreAJourClients()">Mettre √† jour</button>
      <div id="admin-success" style="color:green; margin-top:10px;"></div>
    </div>
  </div>

  <script>
    // Initial donn√©es (modifiable via admin)
    let clientsParTechnicien = {
      "tech n3": 0,
      "tech n4": 0
    };

    function afficherStatut() {
      const entree = document.getElementById("input-tech").value.trim().toLowerCase();
      const nbClients = clientsParTechnicien[entree];
      const statutDiv = document.getElementById("statut");
      statutDiv.className = ""; // reset

      if (nbClients === undefined) {
        statutDiv.textContent = "Technicien inconnu.";
        return;
      }

      if (nbClients < 2) {
        statutDiv.textContent = "‚úÖ Vert (Moins de 2)";
        statutDiv.classList.add("vert");
      } else if (nbClients >= 2 && nbClients < 5) {
        statutDiv.textContent = "üü° Jaune (Entre 2 et 4)";
        statutDiv.classList.add("jaune");
      } else {
        statutDiv.textContent = "üî¥ Rouge (5 ou plus)";
        statutDiv.classList.add("rouge");
      }
    }

    // Gestion Admin

    document.getElementById("admin-toggle-btn").addEventListener("click", () => {
      const adminSection = document.getElementById("admin-section");
      adminSection.style.display = (adminSection.style.display === "none" || adminSection.style.display === "") ? "block" : "none";
      clearAdminFields();
    });

    function verifierMotDePasse() {
      const mdp = document.getElementById("admin-password").value;
      const msg = document.getElementById("admin-msg");
      const formAdmin = document.getElementById("admin-form");
      const successMsg = document.getElementById("admin-success");
      successMsg.textContent = "";

      // Change le mot de passe ici :
      const motDePasseCorrect = "bravo123";

      if (mdp === motDePasseCorrect) {
        msg.textContent = "";
        formAdmin.style.display = "block";
        // Remplir les inputs avec les valeurs actuelles
        document.getElementById("clients-n3").value = clientsParTechnicien["tech n3"];
        document.getElementById("clients-n4").value = clientsParTechnicien["tech n4"];
      } else {
        msg.textContent = "Mot de passe incorrect.";
        formAdmin.style.display = "none";
      }
    }

    function mettreAJourClients() {
      const n3 = parseInt(document.getElementById("clients-n3").value);
      const n4 = parseInt(document.getElementById("clients-n4").value);
      const successMsg = document.getElementById("admin-success");

      if (isNaN(n3) || isNaN(n4) || n3 < 0 || n4 < 0) {
        alert("Veuillez entrer des nombres valides (0 ou plus).");
        return;
      }

      clientsParTechnicien["tech n3"] = n3;
      clientsParTechnicien["tech n4"] = n4;

      successMsg.textContent = "Mise √† jour effectu√©e avec succ√®s !";
      // R√©afficher le statut si le tech est d√©j√† rempli
      afficherStatut();
    }

    function clearAdminFields() {
      document.getElementById("admin-password").value = "";
      document.getElementById("admin-msg").textContent = "";
      document.getElementById("admin-success").textContent = "";
      document.getElementById("admin-form").style.display = "none";
      document.getElementById("clients-n3").value = "";
      document.getElementById("clients-n4").value = "";
    }
  </script>

</body>
</html>
